<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}"
      lang="en">
<head>
    <meta charset="UTF-8">
    <title>Book Slot by City</title>
</head>
<body>
    <div layout:fragment="content">
        <form method="post" id="spot-form" th:action="@{/user/member/book-slot}" th:object="${spotDto}">

            <input type="hidden" name="userId"
                   th:value="${userId}" />

            <input type="date" name="selectedDate" required
                   th:attr="min=${minRegistrationDate}" th:value="${selectedDate}"/>
            <div>Note: Registration closes 2 days before of Vaccination Drive.</div>

            <div th:replace="fragments/form::spot-select-elements"></div>

            <div>
                Remaining slot&nbsp;:&nbsp;
                <span th:if="${remainingSlots}" th:text="${remainingSlots}"></span>
                <span th:unless="${remainingSlots}" th:text="${'Please select a city.'}"></span>
            </div>

            <input type="submit" value="Search"
                   th:if="${spots==null}" />
            <input type="submit" value="Book Slot"
                   th:unless="${spots==null}" />
        </form>
        <a th:href="@{/user/dashboard}"><button>Back</button></a>

    </div>

    <script layout:fragment="script">
        function submitForm() {
            document.getElementById('spot-form').submit();
        }
    </script>
</body>
</html>